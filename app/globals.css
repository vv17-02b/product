@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));

/* FIX: rotate має крутитися, а не хитатися */
@keyframes rotate {
  to {
    transform: rotate(360deg);
  }
}

@layer components {
  .modal-backdrop {
    @apply fixed inset-0 bg-black/20 flex items-center justify-center z-50;
  }

  /* FIX: батько має бути position: relative */
  .rainbow {
    position: relative;
  }

  .rainbow::before {
    content: '';
    position: absolute;
    inset: -50%;
    z-index: -1;

    /* FIX: gradient повинен мати мінімум 2 кольори */
    background-image: linear-gradient(
      90deg,
      transparent,
      #00eaff,
      transparent
    );

    background-repeat: no-repeat;
    background-position: 100% 50%;
    background-size: 60% 40%;
    filter: blur(6px);
    animation: rotate 4s linear infinite;
  }

  @media (min-width: 640px) {
    .rainbow::before {
      background-size: 50% 30%;
    }
  }

  @keyframes shine {
    0% {
      background-position: 0% 50%;
    }
    100% {
      background-position: 100% 50%;
    }
  }

  .button-bg {
    background: conic-gradient(
      from 0deg,
      #00F5FF,
      #000,
      #000,
      #00F5FF,
      #000,
      #000,
      #000,
      #00F5FF
    );
    background-size: 300% 300%;
    animation: shine 6s linear infinite;
  }

  .button-bg--reverse {
    animation-direction: reverse;
  }

  @keyframes spin-gradient {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  .bg_clip {
    clip-path: polygon(
      50% 0%,
      100% 0,
      100% 60%,
      100% 80%,
      0 100%,
      0% 60%,
      0 0
    );
  }

  /* FIX: перенесено сюди з utilities (Tailwind забороняє вкладені @layer) */
  .neon-line {
    box-shadow:
      0 0 5px #fff,
      0 0 10px #fbbf24,
      0 0 20px #d97706,
      0 0 40px #d97706;
  }

  .animate-shimmer {
    animation: shimmer-move 2s linear infinite;
  }
}

.perspective {
  perspective: 1000px;
}

@layer utilities {
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: #0ef0f0 transparent;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 5px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #0ef0f0 0%, #4a09ed 100%);
    border-radius: 10px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #0bdada;
  }

  @keyframes neon-flow {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }

  .animate-neon {
    background: linear-gradient(90deg, rgb(68, 37, 2), #fbbf24, #d97706);
    background-size: 200% 200%;
    animation: neon-flow 3s linear infinite;
    box-shadow: 0 0 10px #d97706, 0 0 20px #fbbf24;
  }

  .neon-border {
    position: relative;
  }

  .neon-border::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 50%;
    padding: 2px;

    background: conic-gradient(
      from 0deg,
      transparent,
      #00eaff,
      #00ff9d,
      #00eaff,
      transparent
    );

    mask:
      linear-gradient(#000 0 0) content-box,
      linear-gradient(#000 0 0);

    /* FIX: Safari support */
    mask-composite: exclude;
    -webkit-mask-composite: xor;

    animation: spin 2s linear infinite;
    filter: blur(1px);
    pointer-events: none;
  }
}

/* FIX: keyframes мають бути на верхньому рівні */
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

@keyframes shimmer-move {
  from {
    transform: translateX(-100%);
  }
  to {
    transform: translateX(100%);
  }
}

@layer base {
  body {
    min-height: 100vh;
    margin: 0;
    font-family: "Rubik", sans-serif;
    @apply bg-white dark:bg-gray-950;
  }
}
